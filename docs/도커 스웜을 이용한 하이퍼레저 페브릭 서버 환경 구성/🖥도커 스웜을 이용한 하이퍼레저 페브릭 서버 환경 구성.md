ì´ ê¸€ì€ ì•„ë˜ì˜ ë²„ì „ì„ ê¸°ì¤€ìœ¼ë¡œ ì‘ì„±ë˜ì—ˆìŠµë‹ˆë‹¤. ì²´ì¸ì½”ë“œ(ìŠ¤ë§ˆíŠ¸ ì»¨íŠ¸ë™íŠ¸)ì™€ SDKëŠ” ìë°”ë¥¼ í™œìš©í•˜ì—¬ ê°œë°œë˜ì—ˆìŠµë‹ˆë‹¤.

# ğŸ–¥ í™˜ê²½ êµ¬ì„±:

í•˜ì´í¼ë ˆì € íŒ¨ë¸Œë¦­ ë„¤íŠ¸ì›Œí¬ëŠ”

- **í”¼ì–´ 5ê°œ (ì¸ëŒì„œ 2ê°œ)**
- **ì˜¤ë”ëŸ¬ 5ê°œ**
- **CA 3ê°œ (Orgê°€ 3ê°œì´ê¸° ë•Œë¬¸)**
- **tools (cli â€” ë„¤íŠ¸ì›Œí¬ ì¡°ì‘ìš©) 1ê°œ**

ë¡œ êµ¬ì„±ë©ë‹ˆë‹¤. ëª¨ë“  ë¬¼ë¦¬ì  ì„œë²„ëŠ” ì•„ë˜ì™€ ê°™ì´ ëª¨ë‘ ë™ì¼í•œ í™˜ê²½ìœ¼ë¡œ êµ¬ì„±ë˜ì–´ìˆìŠµë‹ˆë‹¤.

- ë¬¼ë¦¬ì ì¸ ì„œë²„ ì»´í“¨í„° 5ëŒ€ ì—°ê²°
- ìš°ë¶„íˆ¬: 18.04
- ìë°”: openjdk11

ìš°ë¶„íˆ¬ëŠ” 16.04ë¥¼ ì‚¬ìš©í•˜ì…”ë„ ë¬´ë°©í•©ë‹ˆë‹¤. JDK8ë„ í˜¸í™˜ë©ë‹ˆë‹¤.

- í•˜ì´í¼ë ˆì € íŒ¨ë¸Œë¦­: v1.4.6

íŒ¨ë¸Œë¦­ì˜ ê²½ìš° v1.4.7 ë²„ì „ê¹Œì§€ëŠ” ë¬¸ì œì—†ì´ ë™ì‘í•˜ëŠ” ê²ƒì„ í™•ì¸í•˜ì˜€ìŠµë‹ˆë‹¤.

- ë„ì»¤ ë° ë„ì»¤ ì»´í¬ì¦ˆ: 19.03.6 & 1.17.1
- YAML: 3.8

ë„ì»¤ëŠ” ìŠ¤ì›œ í™œìš©ì„ ìœ„í•´ 19.03.6 ë²„ì „ ì´ìƒì„ í™œìš©í•´ì£¼ì„¸ìš”. YAML ë²„ì „ë„ 3.3 ë²„ì „ ì´ìƒ ì‚¬ìš©í•´ì£¼ì„¸ìš”.

# ğŸ‘€ ë„ì»¤ ì´ë¯¸ì§€:

ë„ì»¤ í—ˆë¸Œì— ìˆëŠ” í•˜ì´í¼ë ˆì € íŒ¨ë¸Œë¦­ í”¼ì–´, ì˜¤ë”ëŸ¬, CA, toolsë¥¼ í™œìš©í•©ë‹ˆë‹¤.

ì´ë¯¸ì§€ì˜ ë²„ì „ì€ 1.4.6 ë²„ì „ìœ¼ë¡œ í•˜ì‹œê¸¸ ê¶Œì¥ë“œë¦½ë‹ˆë‹¤. íŒ¨ë¸Œë¦­ 2.x ë²„ì „ì€ ì•Œë ¤ë“œë¦¬ëŠ” ë°©ë²•ê³¼ í˜¸í™˜ë˜ì§€ ì•Šì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```
# fabric-samplesì—ì„œ ì‚¬ìš©í•˜ëŠ” ì´ë¯¸ì§€ì™€ ë™ì¼í•©ë‹ˆë‹¤.
docker pull hyperledger/fabric-peer:1.4.6
docker pull hyperledger/fabric-orderer:1.4.6
docker pull hyperledger/fabric-ca:1.4.6
docker pull hyperledger/fabric-tools:1.4.6
```

íŒ¨ë¸Œë¦­ì˜ ë„¤íŠ¸ì›Œí¬ í•©ì˜ ì•Œê³ ë¦¬ì¦˜ì€ raftë¡œ êµ¬ì„±í–ˆìŠµë‹ˆë‹¤. kafkaë¡œ êµ¬ì„±í•  ê²½ìš° ì„¤ì •ì„ ë‹¬ë¦¬í•˜ê³  ë„ì»¤ë¡œ kafkaì™€ zookeeperë¥¼ ë„ì»¤ë¡œ ë„ì›Œì•¼í•©ë‹ˆë‹¤. ì´ ê¸€ì—ì„œëŠ” kafkaë¥¼ í™œìš©í•œ í•©ì˜ ì•Œê³ ë¦¬ì¦˜ì— ëŒ€í•´ ì–¸ê¸‰í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

```
$ docker images
REPOSITORY                       TAG        IMAGE ID            CREATED             SIZE
hyperledger/fabric-ca            1.4.6      3b96a893c1e4        12 months ago       150MB
hyperledger/fabric-tools         1.4.6      0f9743ac0662        12 months ago       1.49GB
hyperledger/fabric-orderer       1.4.6      84eaba5388e7        12 months ago       120MB
hyperledger/fabric-peer          1.4.6      5a52faa5d8c2        12 months ago       128MB
```

# ğŸ”— ë„ì»¤ ìŠ¤ì›œ ë„¤íŠ¸ì›Œí¬ êµ¬ì¶•

# ë„ì»¤ ìŠ¤ì›œ ìƒì„±

ì•„ë¬´ ë…¸ë“œë¥¼ ì„ íƒí•´ë„ ìƒê´€ ì—†ìœ¼ë©°, ìƒì„±í•œ ë…¸ë“œëŠ” ë§¤ë‹ˆì €ë¡œ ì§€ì •ë©ë‹ˆë‹¤.

ì˜ˆì œì—ì„œëŠ” server 1, 2, 3, 4, 5 ì´ ìˆë‹¤ê³  ê°€ì •í•˜ê³  server 1ì—ì„œ initì„ ì§„í–‰í–ˆë‹¤ê³  ê°€ì •í•©ë‹ˆë‹¤.

```
> docker swarm init --advertise-addr [server 1 ip:port] # --advertise-addrëŠ” ì™¸ë¶€ ì„œë²„ê°€ ì¡´ì¬í•œë‹¤ë©´ ë°˜ë“œì‹œ ì„¤ì •í•´ì•¼í•¨. ìƒëµì‹œ ê¸°ë³¸ê°’ìœ¼ë¡œ ë‚´ë¶€ ipë¡œ ì„¤ì •ë¨
Swarm initialized: current node (mdd0e2xrufx3dt5ndoweefhsq) is now a manager.To add a worker to this swarm, run the following command:    docker swarm join --token SWMTKN-1-4js4u9rxcbnu96lb52av6sngjh7bmt2up8cwydrae0jy6dpiow-2dupgfkwjgmnet2ql6ufclpqo [server 1 ip:port] 
		# í•´ë‹¹ ëª…ë ¹ì–´ë¥¼ ë³µì‚¬í•˜ì—¬ ë„¤íŠ¸ì›Œí¬ì— í¬í•¨ì‹œí‚¤ê³ ìí•˜ëŠ” ì„œë²„ì— ì…ë ¥To add a manager to this swarm, run 'docker swarm join-token manager' and follow the instructions.
```

# ì›Œì»¤ ë…¸ë“œ ì„¤ì •

server 1ì´ ìŠ¤ì›œì„ ìƒì„±í•˜ê³  server 2, 3, 4, 5 ì—ì„œ ì•ì—ì„œ ìƒì„±í•œ ì½”ë“œë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤.

ì›Œì»¤ ë…¸ë“œëŠ” ë§¤ë‹ˆì € ë…¸ë“œë¡œ ë³€ê²½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë§¤ë‹ˆì € ë…¸ë“œëŠ” ë„¤íŠ¸ì›Œí¬ì˜ ìœ ì§€ ë° ê´€ë¦¬ë¥¼ ìœ„í•´ 3, 5, 7 ë“±ì˜ ìˆ«ìë¡œ ìœ ì§€ë˜ì–´ì•¼ í•©ë‹ˆë‹¤. ë§¤ë‹ˆì € ë…¸ë“œë§Œì´ ë„ì»¤ ìŠ¤ì›œì„ ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```
# ë„ì»¤ ìŠ¤ì›œ ìƒì„±(init)ì— ì˜í•´ ìƒì„±ëœ ê°’ì„ ë³µì‚¬í•˜ì—¬ ì…ë ¥í•˜ë©° ì¶”ê°€ë¡œ --advertise-addr [current ip:port]ë¥¼ ì…ë ¥í•˜ì—¬ í˜„ì¬ ë…¸ë“œë¥¼ ì¸ì‹í•  ìˆ˜ ìˆë„ë¡ í•¨.
# --advertise-addr [ip:port] ë¥¼ ì„¤ì •í•˜ì§€ ì•Šì„ ê²½ìš° ë§ˆì°¬ê°€ì§€ë¡œ ë‚´ë¶€ ipë¡œ ì„¤ì •ë¨
docker swarm join --token SWMTKN-1-4js4u9rxcbnu96lb52av6sngjh7bmt2up8cwydrae0jy6dpiow-2dupgfkwjgmnet2ql6ufclpqo [server 1 ip:port] --advertise-addr [current ip:port]# ì›Œì»¤ ë…¸ë“œ ë§¤ë‹ˆì € ë…¸ë“œë¡œ ë³€ê²½, server nameì€ host nameì„ ì˜ë¯¸í•¨
docker node promote [server name]
```

# ì˜¤ë²„ë ˆì´ ë„¤íŠ¸ì›Œí¬ ìƒì„±

ì²´ì¸ì½”ë“œë¥¼ í™œìš©í•˜ê¸° ìœ„í•´ ë°˜ë“œì‹œ ë‹¤ìŒê³¼ ê°™ì´ ì„¤ì •í•˜ì—¬ ë„¤íŠ¸ì›Œí¬ë¥¼ ìƒì„±í•´ì•¼í•©ë‹ˆë‹¤.

```
docker network create -d overlay --attachable [network name]
```

# ë„ì»¤ ìŠ¤ì›œ í™•ì¸

```
$ docker network ls
NETWORK ID          NAME                DRIVER              SCOPE
b122f2d6ddf1        bridge              bridge              local
bf5eba8c9b32        docker_gwbridge     bridge              local
3c151cfaf38b        host                host                local
hzakfrmqtlm2        ingress             overlay             swarm
9eb950e92d40        none                null                local
rj4oqjgr0tff        [network name]      overlay             swarm$ docker node ls
ID                            HOSTNAME            STATUS              AVAILABILITY        MANAGER STATUS      ENGINE VERSION
y0af74gpp00m779k26agftnq7     server1             Ready               Active              Reachable           19.03.6
xkoudxzncszwssqvmxhig2kak *   server2             Ready               Active              Leader              19.03.6
gsf163ra5s7h0iqg66yhlpvmc     server3             Ready               Active                                  19.03.6
o40ddoijau0a068h8599kffjc     server4             Ready               Active                                  19.03.6
p7yvh1eljg6df9l8m4ix88mbh     server5             Ready               Active              Reachable           19.03.6
```

ìœ„ì™€ ê°™ì´ ìˆ˜í–‰í•˜ì…¨ë‹¤ë©´ **í•˜ì´í¼ë ˆì € íŒ¨ë¸Œë¦­ê³¼ ë„ì»¤ ìŠ¤ì›œì„ í™œìš©í•  ìˆ˜ ìˆëŠ” ì¤€ë¹„**ê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.

# ğŸ—‚ í•˜ì´í¼ë ˆì € íŒ¨ë¸Œë¦­ ì„¤ì • íŒŒì¼

í•˜ì´í¼ë ˆì € íŒ¨ë¸Œë¦­ì˜ cryptogen, configtxgenê³¼ crypto-config.yaml, configtx.yamlì— ëŒ€í•œ ê°œë…ì„ ìˆ™ì§€í–ˆë‹¤ê³  ê°€ì •í•œ ìƒíƒœì—ì„œ ë³€ê²½ì´ í•„ìš”í•œ ë¶€ë¶„ë§Œì„ ì–¸ê¸‰í•©ë‹ˆë‹¤.

í•´ë‹¹í•˜ëŠ” ë¶€ë¶„ì— ì£¼ì„ìœ¼ë¡œ ë‚´ìš©ì„ ì…ë ¥í•´ë‘ì—ˆìŠµë‹ˆë‹¤.

ì•„ë˜ì˜ ë‚´ìš©ì€ í•˜ë‚˜ì˜ ìƒ˜í”Œì´ë©°, ë°°í¬í•˜ê³ ì í•˜ëŠ” í™˜ê²½ êµ¬ì„±ì— ë§ê²Œ YAML íŒŒì¼ì— í”¼ì–´ì™€ ì˜¤ë”ëŸ¬ë¥¼ ì¶”ê°€í•´ì£¼ì–´ì•¼ í•©ë‹ˆë‹¤.

ì»¤ìŠ¤í„°ë§ˆì´ì§•ì´ í•„ìš”í•œ ë¶€ë¶„ì€ **êµµì€ ê¸€ì”¨**ë¡œ í‘œì‹œí•©ë‹ˆë‹¤. ì£¼ì„ìœ¼ë¡œ í‘œì‹œí•œ ê³³ ì´ì™¸ì—ëŠ” ì‘ì„±ëœ ê°’ ì‚¬ìš©ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.

# crypto-config.yaml

ë¸”ë¡ì²´ì¸ ë„¤íŠ¸ì›Œí¬ì˜ êµ¬ì„±ì— ë§ëŠ” certì™€ mspë¥¼ ë§Œë“¤ê¸° ìœ„í•´ ì‚¬ìš©ë˜ëŠ” íŒŒì¼ì…ë‹ˆë‹¤.

CA ê¸°ëŠ¥ì„ í™œìš©í•  ìˆ˜ë„ ìˆì§€ë§Œ ì´ ê¸€ì—ì„œëŠ” cryptogenìœ¼ë¡œ ìˆ˜ì‘ì—…ìœ¼ë¡œ ë§Œë“œëŠ” ë°©ë²•ì…ë‹ˆë‹¤.

â­ï¸ ì™¸ë¶€ë§ì„ í™œìš©í•  ì˜ˆì •ì´ë¼ë©´ ë„¤íŠ¸ì›Œí¬ ê´€ë ¨ ì„¤ì •ì„ ì¶”ê°€í•´ì£¼ì–´ì•¼í•©ë‹ˆë‹¤.

```
# Copyright IBM Corp. All Rights Reserved.
#
# SPDX-License-Identifier: Apache-2.0
## ---------------------------------------------------------------------------
# "OrdererOrgs" - Definition of organizations managing orderer nodes
# ---------------------------------------------------------------------------
OrdererOrgs:
  # ---------------------------------------------------------------------------
  # Orderer
  # ---------------------------------------------------------------------------
  - Name: Orderer
    Domain: ssel.jbnu
    EnableNodeOUs: true
    # ---------------------------------------------------------------------------
    # "Specs" - See PeerOrgs below for complete description
    # ---------------------------------------------------------------------------
    Specs:
      **- Hostname: orderer1
        SANS: # ì™¸ë¶€ë§ì„ ì´ìš©í•  ê²½ìš° ip/urlì„ ë°˜ë“œì‹œ ì…ë ¥í•´ì•¼ ì •ìƒì ìœ¼ë¡œ ë™ì‘í•¨
          - "xxx.xxx.xxx.xx1"
          - "domain1.com"**      - Hostname: orderer2
        SANS:
          **- "xxx.xxx.xxx.xx2"
          - "domain2.com"**
			...# ---------------------------------------------------------------------------
# "PeerOrgs" - Definition of organizations managing peer nodes
# ---------------------------------------------------------------------------
PeerOrgs:
  # ---------------------------------------------------------------------------
  # Org1
  # ---------------------------------------------------------------------------
  - Name: Org1
    Domain: org1.ssel.jbnu
    EnableNodeOUs: true
    # ---------------------------------------------------------------------------
    # "Specs"
    # ---------------------------------------------------------------------------
    # Uncomment this section to enable the explicit definition of hosts in your
    # configuration.  Most users will want to use Template, below
    #
    # Specs is an array of Spec entries.  Each Spec entry consists of two fields:
    #   - Hostname:   (Required) The desired hostname, sans the domain.
    #   - CommonName: (Optional) Specifies the template or explicit override for
    #                 the CN.  By default, this is the template:
    #
    #                              "{{.Hostname}}.{{.Domain}}"
    #
    #                 which obtains its values from the Spec.Hostname and
    #                 Org.Domain, respectively.
    # ---------------------------------------------------------------------------
    # Specs:
    #   - Hostname: foo # implicitly "foo.org1.ssel.jbnu"
    #     CommonName: foo27.org5.ssel.jbnu # overrides Hostname-based FQDN set above
    #   - Hostname: bar
    #   - Hostname: baz
    # ---------------------------------------------------------------------------
    # "Template"
    # ---------------------------------------------------------------------------
    # Allows for the definition of 1 or more hosts that are created sequentially
    # from a template. By default, this looks like "peer%d" from 0 to Count-1.
    # You may override the number of nodes (Count), the starting index (Start)
    # or the template used to construct the name (Hostname).
    #
    # Note: Template and Specs are not mutually exclusive.  You may define both
    # sections and the aggregate nodes will be created for you.  Take care with
    # name collisions
    # ---------------------------------------------------------------------------
    Template:
      Count: 2
      **SANS: # í”¼ì–´ë„ ì˜¤ë”ëŸ¬ì™€ ë§ˆì°¬ê°€ì§€ë¡œ ip/urlì— ëŒ€í•œ ì •ë³´ í•„ìš”
          - "xxx.xxx.xxx.xx3"
          - "domain3.com"**
      # Start: 5
      # Hostname: {{.Prefix}}{{.Index}} # default
    # ---------------------------------------------------------------------------
    # "Users"
    # ---------------------------------------------------------------------------
    # Count: The number of user accounts _in addition_ to Admin
    # ---------------------------------------------------------------------------
    Users:
      Count: 1
```

# configtx.yaml

ë¸”ë¡ì²´ì¸ ë„¤íŠ¸ì›Œí¬ì˜ gennesis.block, channel.tx, anchorPeer.tx ë“±ì— ë„¤íŠ¸ì›Œí¬ ì„¤ì •ê³¼ êµ¬ì„±ì„ ì…ë ¥í•©ë‹ˆë‹¤.

â­ï¸ ëª¨ë“  í”¼ì–´ì™€ ì˜¤ë”ëŸ¬ëŠ” ì•„ë˜ì™€ ê°™ì´ ì‚¬ìš©í•˜ê³ ì í•˜ëŠ” ë„¤íŠ¸ì›Œí¬ ì„¤ì •ê³¼ êµ¬ì„±ìœ¼ë¡œë§Œ ë™ì‘í•´ì•¼í•©ë‹ˆë‹¤.

```
Organizations:
    ...    - &Org1
        # DefaultOrg defines the organization which is used in the sampleconfig
        # of the fabric.git development environment
        **Name: Org1MSP**        # ID to load the MSP definition as
        **ID: Org1MSP**        MSPDir: crypto-config/peerOrganizations/org1.ssel.jbnu/msp        # Policies defines the set of policies at this level of the config tree
        # For organization policies, their canonical path is usually
        #   /Channel/<Application|Orderer>/<OrgName>/<PolicyName>
				#####################################
				# ì¡°ì§ ê¶Œí•œ ë¶€ì—¬ ì»¤ìŠ¤í„°ë§ˆì´ì¦ˆ ê°€ëŠ¥
        Policies:
            Readers:
                Type: Signature
                Rule: "OR('Org1MSP.admin', 'Org1MSP.peer', 'Org1MSP.client')"
            Writers:
                Type: Signature
                Rule: "OR('Org1MSP.admin', 'Org1MSP.client')"
            Admins:
                Type: Signature
                Rule: "OR('Org1MSP.admin')"        # leave this flag set to true.
        AnchorPeers:
            # AnchorPeers defines the location of peers which can be used
            # for cross org gossip communication.  Note, this value is only
            # encoded in the genesis block in the Application section context
            **- Host: [ip/url]
              Port: [port]**
	...
# ì˜¤ë”ëŸ¬ ì„¤ì •
Orderer: &OrdererDefaults    # Orderer Type: The orderer implementation to start
    # Available types are "solo","kafka"  and "etcdraft"
    **OrdererType: etcdraft # etcdraftë¡œ í•©ì˜ ì•Œê³ ë¦¬ì¦˜ ì„¤ì •**    # Batch Timeout: The amount of time to wait before creating a batch
    ****BatchTimeout: 2s 
****
    # Batch Size: Controls the number of messages batched into a block
    BatchSize:        # Max Message Count: The maximum number of messages to permit in a batch
        MaxMessageCount: 100        # Absolute Max Bytes: The absolute maximum number of bytes allowed for
        # the serialized messages in a batch.
        AbsoluteMaxBytes: 500 MB        # Preferred Max Bytes: The preferred maximum number of bytes allowed for
        # the serialized messages in a batch. A message larger than the preferred
        # max bytes will result in a batch larger than preferred max bytes.
        PreferredMaxBytes: 512 KB    # EtcdRaft defines configuration which must be set when the "etcdraft"
    # orderertype is chosen.
		**# Host, port, ClientTLSCert, ServerTLSCertëŠ” ì˜¤ë”ëŸ¬ë³„ë¡œ ì§€ì •í•¨
		# í•´ë‹¹ ê²½ë¡œëŠ” cryptogenì„ í†µí•´ ìƒì„±ëœ ê°’ ì…ë ¥**
    **EtcdRaft:
        Consenters:
          - Host: [server 1 ip/url]
            Port: [port]
            ClientTLSCert: crypto-config/ordererOrganizations/ssel.jbnu/orderers/orderer1.ssel.jbnu/tls/server.crt
            ServerTLSCert: crypto-config/ordererOrganizations/ssel.jbnu/orderers/orderer1.ssel.jbnu/tls/server.crt
          - Host: [server 2 ip/url]
            Port: [port]
            ClientTLSCert: crypto-config/ordererOrganizations/ssel.jbnu/orderers/orderer2.ssel.jbnu/tls/server.crt
            ServerTLSCert: crypto-config/ordererOrganizations/ssel.jbnu/orderers/orderer2.ssel.jbnu/tls/server.crt
          - Host: [server 3 ip/url]
            Port: [port]
            ClientTLSCert: crypto-config/ordererOrganizations/ssel.jbnu/orderers/orderer3.ssel.jbnu/tls/server.crt
            ServerTLSCert: crypto-config/ordererOrganizations/ssel.jbnu/orderers/orderer3.ssel.jbnu/tls/server.crt
          - Host: [server 4 ip/url]
            Port: [port]
            ClientTLSCert: crypto-config/ordererOrganizations/ssel.jbnu/orderers/orderer4.ssel.jbnu/tls/server.crt
            ServerTLSCert: crypto-config/ordererOrganizations/ssel.jbnu/orderers/orderer4.ssel.jbnu/tls/server.crt
          - Host: [server 5 ip/url]
            Port: [port]
            ClientTLSCert: crypto-config/ordererOrganizations/ssel.jbnu/orderers/orderer5.ssel.jbnu/tls/server.crt
            ServerTLSCert: crypto-config/ordererOrganizations/ssel.jbnu/orderers/orderer5.ssel.jbnu/tls/server.crt
    Addresses:
        - [server 1 ip/url]:[port]
        - [server 2 ip/url]:[port]
        - [server 3 ip/url]:[port]
        - [server 4 ip/url]:[port]
        - [server 5 ip/url]:[port]
	...# genesis blockê³¼ channel ì„¤ì •ì„ ìœ„í•œ í”„ë¡œíŒŒì¼**
Profiles:
    **ThreeOrgsChannel: # í”„ë¡œíŒŒì¼ ì´ë¦„ ë³€ê²½ ê°€ëŠ¥
        Consortium: SampleConsortium # ì»¨ì†Œì‹œì—„ ë³€ê²½ ê°€ëŠ¥**
        <<: *ChannelDefaults
        Application:
            <<: *ApplicationDefaults
            **Organizations: # ì„¤ì •í•˜ê³ ì í•˜ëŠ” êµ¬ì„±ê³¼ ë§ê²Œ ì•„ë˜ ëª©ë¡ ì…ë ¥
                - *Org1    # ìœ—ë¶€ë¶„ì— ì‘ì„±í•œ ì¡°ì§ì„ ì°¸ì¡°í•¨
                - *Org2
                - *Org3**
            Capabilities:
                <<: *ApplicationCapabilities    SampleMultiNodeEtcdRaft:
        <<: *ChannelDefaults
        Capabilities:
            <<: *ChannelCapabilities
        Orderer:
            <<: *OrdererDefaults
            **OrdererType: etcdraft
            EtcdRaft:
				        Consenters:
				          - Host: [server 1 ip/url]
				            Port: [port]
				            ClientTLSCert: crypto-config/ordererOrganizations/ssel.jbnu/orderers/orderer1.ssel.jbnu/tls/server.crt
				            ServerTLSCert: crypto-config/ordererOrganizations/ssel.jbnu/orderers/orderer1.ssel.jbnu/tls/server.crt
				          - Host: [server 2 ip/url]
				            Port: [port]
				            ClientTLSCert: crypto-config/ordererOrganizations/ssel.jbnu/orderers/orderer2.ssel.jbnu/tls/server.crt
				            ServerTLSCert: crypto-config/ordererOrganizations/ssel.jbnu/orderers/orderer2.ssel.jbnu/tls/server.crt
				          - Host: [server 3 ip/url]
				            Port: [port]
				            ClientTLSCert: crypto-config/ordererOrganizations/ssel.jbnu/orderers/orderer3.ssel.jbnu/tls/server.crt
				            ServerTLSCert: crypto-config/ordererOrganizations/ssel.jbnu/orderers/orderer3.ssel.jbnu/tls/server.crt
				          - Host: [server 4 ip/url]
				            Port: [port]
				            ClientTLSCert: crypto-config/ordererOrganizations/ssel.jbnu/orderers/orderer4.ssel.jbnu/tls/server.crt
				            ServerTLSCert: crypto-config/ordererOrganizations/ssel.jbnu/orderers/orderer4.ssel.jbnu/tls/server.crt
				          - Host: [server 5 ip/url]
				            Port: [port]
				            ClientTLSCert: crypto-config/ordererOrganizations/ssel.jbnu/orderers/orderer5.ssel.jbnu/tls/server.crt
				            ServerTLSCert: crypto-config/ordererOrganizations/ssel.jbnu/orderers/orderer5.ssel.jbnu/tls/server.crt
				    Addresses:
				        - [server 1 ip/url]:[port]
				        - [server 2 ip/url]:[port]
				        - [server 3 ip/url]:[port]
				        - [server 4 ip/url]:[port]
				        - [server 5 ip/url]:[port]**            Organizations:
            - *OrdererOrg
            Capabilities:
                <<: *OrdererCapabilities
        Application:
            <<: *ApplicationDefaults
            Organizations:
            - <<: *OrdererOrg
        **Consortiums:
            SampleConsortium:
                Organizations:
                - *Org1
                - *Org2
                - *Org3**
```

# ê²°ê³¼ë¬¼

fabric-samples ì˜ˆì œì—ì„œ ìƒì„±ë˜ëŠ” ê²°ê³¼ë¬¼ê³¼ ë™ì¼í•©ë‹ˆë‹¤. ë„¤íŠ¸ì›Œí¬ ì„¤ì •ê³¼ êµ¬ì„±ì— ë§ê²Œ ìƒì„±ë˜ë„ë¡ë§Œ ë°”ë€Œì—ˆìŠµë‹ˆë‹¤.

crtyptogen.yamlì— ì˜í•œ ìƒì„±ë¬¼

configtx.yamlì— ì˜í•´ ìƒì„±ë˜ëŠ” íŒŒì¼

**ìƒì„±ëœ íŒŒì¼ë“¤ì€ certì™€ mspì˜ ê²½ìš° ê° í”¼ì–´ì™€ ì˜¤ë”ëŸ¬ì— ë§ê²Œ ìœ„ì¹˜í•´ì£¼ì–´ì•¼ í•©ë‹ˆë‹¤.** ì˜ˆë¥¼ ë“¤ì–´ ì„œë²„ 1ì—ì„œ org 1ì— peer 0ì„ ë™ì‘í•œë‹¤ë©´ í•´ë‹¹í•˜ëŠ” certì™€ msp íŒŒì¼ì´ ì„œë²„ 1 ì €ì¥ì†Œì— ì¡´ì¬í•´ì•¼í•©ë‹ˆë‹¤. ê·¸ë¦¬ê³  í•´ë‹¹ ê²½ë¡œë¥¼ ë„ì»¤ ì»¨í…Œì´ë„ˆì— ë§ˆìš´íŠ¸(volume í™œìš©)í•´ì•¼ í•©ë‹ˆë‹¤.

**channel-artifacts**ëŠ” cli(tools)ë¥¼ ë„ì›Œë‘” ì„œë²„ì—ì„œ ë™ì‘í•´ì•¼í•©ë‹ˆë‹¤. clië¥¼ ë™ì‘ì‹œí‚¤ëŠ” ì„œë²„ë§Œ ì†Œìœ í•˜ê³  ìˆìœ¼ë©´ ë©ë‹ˆë‹¤.

# ğŸ“ƒ ë„ì»¤ ì»´í¬ì¦ˆ íŒŒì¼ ì‘ì„±

ë„ì»¤ ìŠ¤ì›œì—ì„œ í•˜ì´í¼ë ˆì € í”¼ì–´, ì˜¤ë”ëŸ¬, ca, tools ë“±ì„ ë™ì‘ì‹œí‚¤ê¸° ìœ„í•´ ë„ì»¤ ì»´í¬ì¦ˆ íŒŒì¼ì„ ì‘ì„±í•©ë‹ˆë‹¤.

ë„ì»¤ ì»´í¬ì¦ˆ íŒŒì¼ì€ YAML íŒŒì¼ì„ í†µí•´ ì‘ì„±ë˜ë©´ 3 ë²„ì „ ì´ìƒì„ ë°˜ë“œì‹œ ì‚¬ìš©í•´ì•¼í•©ë‹ˆë‹¤.

ì•„ë˜ì˜ ë‚´ìš©ì€ í•˜ë‚˜ì˜ ìƒ˜í”Œì´ë©°, ë°°í¬í•˜ê³ ì í•˜ëŠ” í™˜ê²½ êµ¬ì„±ì— ë§ê²Œ YAML íŒŒì¼ì— í”¼ì–´ì™€ ì˜¤ë”ëŸ¬ë¥¼ ì¶”ê°€í•´ì£¼ì–´ì•¼ í•©ë‹ˆë‹¤.

ì»¤ìŠ¤í„°ë§ˆì´ì§•ì´ í•„ìš”í•œ ë¶€ë¶„ì€ **êµµì€ ê¸€ì”¨**ë¡œ í‘œì‹œí•©ë‹ˆë‹¤. ì£¼ì„ìœ¼ë¡œ í‘œì‹œí•œ ê³³ ì´ì™¸ì—ëŠ” ì‘ì„±ëœ ê°’ ì‚¬ìš©ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.

# ë„ì»¤ ì»´í¬ì¦ˆ íŒŒì¼ ì‘ì„± ì˜ˆì‹œ

- docker-compose.yaml

```
# Copyright IBM Corp. All Rights Reserved.
#
# SPDX-License-Identifier: Apache-2.0version: '3.8'#########################################################
# ë„ìš°ê³ ì í•˜ëŠ” ì„œë¹„ìŠ¤ì™€ ë„¤íŠ¸ì›Œí¬ë¥¼ ë„ìš°ê³ ì í•˜ëŠ” í™˜ê²½ì— ë§ê²Œ ì…ë ¥
# ë„ì»¤ ì»´í¬ì¦ˆ 3ë²„ì „ ë ˆí¼ëŸ°ìŠ¤ ì°¸ê³ 
# <https://docs.docker.com/compose/compose-file/compose-file-v3/>
########################################################
**volumes:
  orderer2.ssel.jbnu:
  peer1.org1.ssel.jbnu:networks:
  [network name]:
    external: 
      name: ssel**services:
  ca1:
    image: hyperledger/fabric-ca:1.4.6
    environment:
      - FABRIC_CA_HOME=/etc/hyperledger/fabric-ca-server
      - FABRIC_CA_SERVER_CA_NAME=ca-org1
      - FABRIC_CA_SERVER_TLS_ENABLED=true
			###### cryptogenì— ì˜í•´ ìƒì„±ëœ cert, mspì— í•´ë‹¹í•˜ëŠ” ê°’ì„ ì¼ì¹˜í•˜ë„ë¡ ì…ë ¥
      **- FABRIC_CA_SERVER_TLS_CERTFILE=/etc/hyperledger/fabric-ca-server-config/ca.org1.ssel.jbnu-cert.pem
      - FABRIC_CA_SERVER_TLS_KEYFILE=/etc/hyperledger/fabric-ca-server-config/e5a2abd63122bf7d30e7f316391e9d202cb53899efac6703b8ae79859b7dedff_sk**
      - FABRIC_CA_SERVER_PORT=7054
    ports:
      - **[host port]:**7054
    command: sh -c 'fabric-ca-server start --ca.certfile /etc/hyperledger/fabric-ca-server-config/ca.org1.ssel.jbnu-cert.pem --ca.keyfile /etc/hyperledger/fabric-ca-server-config/e5a2abd63122bf7d30e7f316391e9d202cb53899efac6703b8ae79859b7dedff_sk -b admin:adminpw -d'
    volumes:
      **- [file path]/crypto-config/peerOrganizations/org1.ssel.jbnu/ca/:/etc/hyperledger/fabric-ca-server-config**
    networks:
      **[network name]**:
        aliases:
          - ca.org1.ssel.jbnu  **orderer2:**
    **image: hyperledger/fabric-orderer:1.4.6 # ì›í•˜ëŠ” ë²„ì „ ì…ë ¥**
    environment:
      - FABRIC_LOGGING_SPEC=INFO
      - ORDERER_GENERAL_LISTENADDRESS=0.0.0.0
      - ORDERER_GENERAL_GENESISMETHOD=file
      - ORDERER_GENERAL_GENESISFILE=/var/hyperledger/orderer/orderer.genesis.block
      - ORDERER_GENERAL_LOCALMSPID=OrdererMSP
      - ORDERER_GENERAL_LOCALMSPDIR=/var/hyperledger/orderer/msp
      # enabled TLS
      - ORDERER_GENERAL_TLS_ENABLED=true
      - ORDERER_GENERAL_TLS_PRIVATEKEY=/var/hyperledger/orderer/tls/server.key
      - ORDERER_GENERAL_TLS_CERTIFICATE=/var/hyperledger/orderer/tls/server.crt
      - ORDERER_GENERAL_TLS_ROOTCAS=[/var/hyperledger/orderer/tls/ca.crt]
      - ORDERER_GENERAL_CLUSTER_CLIENTCERTIFICATE=/var/hyperledger/orderer/tls/server.crt
      - ORDERER_GENERAL_CLUSTER_CLIENTPRIVATEKEY=/var/hyperledger/orderer/tls/server.key
      - ORDERER_GENERAL_CLUSTER_ROOTCAS=[/var/hyperledger/orderer/tls/ca.crt]
    working_dir: /opt/gopath/src/github.com/hyperledger/fabric
    command: orderer
		
		####################################################
		# volume ë§ˆìš´íŠ¸ í•„ìš”
		# cert, msp, block, channel ë“±ì˜ íŒŒì¼ì„ ì—°ê²°ì‹œì¼œì£¼ê¸° ìœ„í•¨
		####################################################
    **volumes:
      - [file path]/channel-artifacts/genesis.block:/var/hyperledger/orderer/orderer.genesis.block
      - [file path]/crypto-config/ordererOrganizations/ssel.jbnu/orderers/orderer2.ssel.jbnu/msp:/var/hyperledger/orderer/msp
      - [file path]/crypto-config/ordererOrganizations/ssel.jbnu/orderers/orderer2.ssel.jbnu/tls/:/var/hyperledger/orderer/tls
      - [file path]/production/orderer:/var/hyperledger/production/orderer # ì…ë ¥ë˜ëŠ” cert, mspì™€ ìƒì„±ë˜ëŠ” ë¸”ë¡ê³¼ íŠ¸ëœì­ì…˜ì˜ ì €ì¥ì†Œ**
    deploy:
        mode: replicated
        replicas: 1
        restart_policy:
          condition: on-failure
		########################################################
		# ë…¸ì¶œí•˜ê³ ì í•˜ëŠ” í¬íŠ¸ ì„¤ì •
		# í”¼ì–´ëŠ” ê°ì êµ¬ë¶„ë˜ë„ë¡ ì¼ì¼ì´ ì‘ì„±í•´ì¤˜ì•¼í•¨(replicatedë¡œ ë™ì¼í•œ ì—¬ëŸ¬ í”¼ì–´ ìƒì„± X)
		# - ê°ìì— ë§ëŠ” cert, msp í• ë‹¹ì„ ìœ„í•´
		########################################################
    **ports:
      - [host port]:7050**
    **networks:
      [network name]:
        aliases:
          - orderer2.ssel.jbnu**  **peer1org1:**
		##################################################
		# ì›í•˜ëŠ” ë²„ì „ ì´ë¯¸ì§€ë¡œ ë³€ê²½
		##################################################
    **image: hyperledger/fabric-peer:1.4.6**
    environment:
      - CORE_VM_ENDPOINT=unix:///host/var/run/docker.sock
      # the following setting starts chaincode containers on the same
      # bridge network as the peers
      # <https://docs.docker.com/compose/networking/>
      **- CORE_VM_DOCKER_HOSTCONFIG_NETWORKMODE=[network ID] # ë„ì»¤ ìŠ¤ì›œ ì˜¤ë²„ë ˆì´ ë„¤íŠ¸ì›Œí¬ ì…ë ¥**
      - FABRIC_LOGGING_SPEC=INFO
      #- FABRIC_LOGGING_SPEC=DEBUG
      - CORE_PEER_TLS_ENABLED=true
      - CORE_PEER_GOSSIP_USELEADERELECTION=true
      - CORE_PEER_GOSSIP_ORGLEADER=false
      - CORE_PEER_PROFILE_ENABLED=true
      - CORE_PEER_TLS_CERT_FILE=/etc/hyperledger/fabric/tls/server.crt
      - CORE_PEER_TLS_KEY_FILE=/etc/hyperledger/fabric/tls/server.key
      - CORE_PEER_TLS_ROOTCERT_FILE=/etc/hyperledger/fabric/tls/ca.crt
			##################################################
			# í”¼ì–´ì˜ ë„¤íŠ¸ì›Œí¬ ì„¤ì • í•„ìš”
			# ì•„ë˜ì˜ []ë¡œ í‘œì‹œëœ ë‚´ìš©ì„ ë„¤íŠ¸ì›Œí¬ í™˜ê²½ì— ë§ê²Œ ì…ë ¥í•´ì£¼ì–´ì•¼ í•¨
			##################################################
      **- CORE_PEER_ID=peer1.org1.ssel.jbnu
      - CORE_PEER_ADDRESS=[í˜„ì¬ í”¼ì–´ ip/url]:7051 # í˜„ì¬ ì‘ì„±ëœ í”¼ì–´ê°€ í†µì‹ í•˜ê¸° ìœ„í•œ ì£¼ì†Œ, í¬íŠ¸ ë³€ê²½ ë¶ˆí•„ìš”**
      - CORE_PEER_LISTENADDRESS=0.0.0.0:7051  
      **- CORE_PEER_CHAINCODEADDRESS=[í˜„ì¬ í”¼ì–´ ip/url]:7052 # ì²´ì¸ì½”ë“œì™€ ì—°ê²°í•˜ê¸° ìœ„í•œ ì£¼ì†Œ, í¬íŠ¸ ë³€ê²½ ë¶ˆí•„ìš”** 
      - CORE_PEER_CHAINCODELISTENADDRESS=0.0.0.0:7052
      **- CORE_PEER_GOSSIP_BOOTSTRAP=[ë™ì¼í•œ ì¡°ì§ì˜ ë‹¤ë¥¸ í”¼ì–´ ip/url]:[í”¼ì–´ port] # íŒ¨ë¸Œë¦­ ë„¤íŠ¸ì›Œí¬ ì—°ê²°ì„ ìœ„í•œ ë‹¤ë¥¸ í”¼ì–´ ì£¼ì†Œ
      - CORE_PEER_GOSSIP_EXTERNALENDPOINT=[í˜„ì¬ í”¼ì–´ ip/url]:[í”¼ì–´ port] # íŒ¨ë¸Œë¦­ ë„¤íŠ¸ì›Œí¬ì™€ í†µì‹ í•˜ê¸° ìœ„í•œ ì£¼ì†Œ
      - CORE_PEER_LOCALMSPID=[ì¡°ì§ ID] # í˜„ì¬ í”¼ì–´ì˜ ì¡°ì§ id**
    working_dir: /opt/gopath/src/github.com/hyperledger/fabric/peer
    command: peer node start
    **volumes:**
        - /var/run/:/host/var/run/
        **- [file path]/crypto-config/peerOrganizations/org1.ssel.jbnu/peers/peer1.org1.ssel.jbnu/msp:/etc/hyperledger/fabric/msp
        - [file path]/crypto-config/peerOrganizations/org1.ssel.jbnu/peers/peer1.org1.ssel.jbnu/tls:/etc/hyperledger/fabric/tls
        - [file path]/production/peer:/var/hyperledger/production # ì…ë ¥ë˜ëŠ” cert, mspì™€ ìƒì„±ë˜ëŠ” ë¸”ë¡ê³¼ íŠ¸ëœì­ì…˜ì˜ ì €ì¥ì†Œ**
    **ports:
      - [host port]:7051**
    deploy:
        mode: replicated
        replicas: 1
        restart_policy:
          condition: on-failure
    **networks:
      [network name]:
        aliases:
          - peer1.org1.ssel.jbnu**
  	##########################################################################
	# cli(tools)ëŠ” í•˜ì´í¼ë ˆì € íŒ¨ë¸Œë¦­ ë„¤íŠ¸ì›Œí¬ë¥¼ ê´€ë¦¬í•˜ê¸° ìœ„í•œ í”„ë¡œê·¸ë¨ìœ¼ë¡œ
	# ë„¤íŠ¸ì›Œí¬ì˜ ëª¨ë“  ì •ë³´ë¥¼ ê°€ì§€ê³  ìˆì–´ì•¼ í•˜ë©° ë„¤íŠ¸ì›Œí‚¹ì„ ìœ„í•œ ip/port ì •ë³´ë¥¼ ê°€ì§€ê³  ìˆì–´ì•¼ í•¨
	##########################################################################
  **cli2:
    image: hyperledger/fabric-tools:1.4.6**
    tty: true
    stdin_open: true
    environment:
      - SYS_CHANNEL=$SYS_CHANNEL
      - GOPATH=/opt/gopath
      - CORE_VM_ENDPOINT=unix:///host/var/run/docker.sock
      #- FABRIC_LOGGING_SPEC=DEBUG
      - FABRIC_LOGGING_SPEC=INFO
			#############################################################
			# cliëŠ” 1ê°œì˜ í”¼ì–´ë¥¼ í™˜ê²½ë³€ìˆ˜ì—ì„œ ì§€ì •í•˜ì—¬ ë™ì‘í•˜ë„ë¡ ì„¤ê³„ë¨
			# ë”°ë¼ì„œ ì²˜ìŒ ì‹œì‘ì‹œì— ì¡°ì‘í•  ëŒ€ìƒ í”¼ì–´ë¥¼ í•˜ë‚˜ ì…ë ¥í•˜ë„ë¡í•¨
			#############################################################
      **- CORE_PEER_ID=cli2
      - CORE_PEER_ADDRESS=[ì§€ì •ëœ í”¼ì–´ ip/url]:[port]
      - CORE_PEER_LOCALMSPID=[ì§€ì •ëœ í”¼ì–´ ì¡°ì§ id]**
      - CORE_PEER_TLS_ENABLED=true
      - CORE_PEER_TLS_CERT_FILE=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/org1.ssel.jbnu/peers/peer1.org1.ssel.jbnu/tls/server.crt
      - CORE_PEER_TLS_KEY_FILE=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/org1.ssel.jbnu/peers/peer1.org1.ssel.jbnu/tls/server.key
      - CORE_PEER_TLS_ROOTCERT_FILE=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/org1.ssel.jbnu/peers/peer1.org1.ssel.jbnu/tls/ca.crt
      - CORE_PEER_MSPCONFIGPATH=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/org1.ssel.jbnu/users/Admin@org1.ssel.jbnu/msp
    working_dir: /opt/gopath/src/github.com/hyperledger/fabric/peer
    command: /bin/bash
    **volumes:**
        - /var/run/:/host/var/run/
        **- [file path]/chaincode/:/opt/gopath/src/github.com/chaincode # ì²´ì¸ì½”ë“œëŠ” ë°”ë¡œ ë‹¤ìŒì¥ì—ì„œ í™•ì¸ ê°€ëŠ¥í•¨
        - [file path]/crypto-config:/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/
        # scriptëŠ” ë„¤íŠ¸ì›Œí¬ì— ì±„ë„ì„ ìƒì„±í•˜ê³  í”¼ì–´ë¥¼ ì°¸ì—¬ì‹œí‚¤ê³  ì²´ì¸ì½”ë“œë¥¼ ì„¤ì¹˜ ë° ì‹¤í–‰ì‹œí‚¤ëŠ” ê³¼ì •ì„ ë‹´ê³  ìˆìŒ
				- [file path]/scripts:/opt/gopath/src/github.com/hyperledger/fabric/peer/scripts/
        - [file path]/channel-artifacts:/opt/gopath/src/github.com/hyperledger/fabric/peer/channel-artifacts
    depends_on:
      - orderer2
      - peer1org1**
    deploy:
        mode: replicated
        replicas: 1
        restart_policy:
          condition: on-failure
    **networks:
      [network name]:
        aliases:
          - cli**
```

# ğŸ“œ ì²´ì¸ì½”ë“œ(ìŠ¤ë§ˆíŠ¸ ì»¨íŠ¸ë™íŠ¸)

ì²´ì¸ì½”ë“œ ê°œë°œì„ ìœ„í•´ì„œëŠ” VSCode í™•ì¥ í”„ë¡œê·¸ë¨ì¸ IBM Blockchain Platformì„ ì¶”ì²œí•©ë‹ˆë‹¤.

ì‚¬ì§„ì€ vscodeì—ì„œ í™•ì¥í”„ë¡œê·¸ë¨ ê²€ìƒ‰ì°½ì—ì„œ ibm blockchain platformì„ ê²€ìƒ‰í•˜ì—¬ ì„¤ì¹˜í•œ í™”ë©´ì…ë‹ˆë‹¤.

VScodeì— í™•ì¥ í”„ë¡œê·¸ë¨ ê²€ìƒ‰ í›„ IBM Blockchain Platform ì„¤ì¹˜ í™”ë©´

[IBM Cloud Docs](https://cloud.ibm.com/docs/blockchain?topic=blockchain-develop-vscode&locale=ko)

IBM Blockcahin Platform ê°€ì´ë“œ

# vscode ë‹¤ìš´ë¡œë“œ

[Visual Studio Code â€” Code Editing. Redefined](https://code.visualstudio.com/)

í™•ì¥í”„ë¡œê·¸ë¨ â†’ ibm blockchain platform ì„¤ì¹˜

IBM Blockchain Platform í™•ì¥

1. ì²´ì¸ì½”ë“œ íŒ¨í‚¤ì§€ë¥¼ ì˜ë¯¸í•©ë‹ˆë‹¤. íŒ¨í‚¤ì§€ë€ ì²´ì¸ì½”ë“œë¡œ ì‘ì„±ëœ íŒŒì¼ë“¤ì…ë‹ˆë‹¤. ì•„ë˜ì˜ myAsset ì˜ˆì œë¥¼ í†µí•´ ë‚´ë¶€ì— ìˆëŠ” ì½”ë“œ ë‚´ìš©ì„ í™•ì¸í•´ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
2. ibm blockchain platformì—ì„œ í…ŒìŠ¤íŒ…ìš©ìœ¼ë¡œ ìƒì„±í•  ìˆ˜ ìˆëŠ” ë„¤íŠ¸ì›Œí¬ë¥¼ ì œê³µí•©ë‹ˆë‹¤. ë„¤íŠ¸ì›Œí¬ êµ¬ì„±ì€ ê³ ì •ë˜ì–´ ìˆìœ¼ë©° ì‚¬ìš©ìê°€ ì›í•˜ëŠ” ë§Œí¼ ìƒì„± ê°€ëŠ¥í•©ë‹ˆë‹¤.
3. í•˜ì´í¼ë ˆì €ì˜ ì±„ë„ì„ í™•ì¸í•  ìˆ˜ ìˆê³  ì±„ë„ì— ë°°í¬ëœ ìŠ¤ë§ˆíŠ¸ ì»¨íŠ¸ë™íŠ¸ë¥¼ ì‚¬ìš©í•´ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. í•¨ìˆ˜ í˜¸ì¶œì˜ ê²°ê³¼ëŠ” vscodeì˜ í„°ë¯¸ë„ì—ì„œ í™•ì¸ ê°€ëŠ¥í•©ë‹ˆë‹¤.
4. í•˜ì´í¼ë ˆì € íŒ¨ë¸Œë¦­ ë„¤íŠ¸ì›Œí¬ì˜ walletì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. í•´ë‹¹ ë¶€ë¶„ì—ì„œ walletì˜ í‹€ì„ ë‹¤ìš´ë¡œë“œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. walletì„ ë‹¤ìš´ ë°›ì•„ í˜„ì¬ êµ¬ì„±í•œ ë„¤íŠ¸ì›Œí¬ì— ë§ë„ë¡ ë³€í˜•í•˜ì—¬ ë‚˜ì¤‘ì— Dappì˜ SDKì— í™œìš©í•©ë‹ˆë‹¤.

ì–´ë–¤ í”¼ì–´ë“  ì²´ì¸ì½”ë“œê°€ ì„¤ì¹˜ë˜ê³  ì‹¤í–‰ë˜ê³  ìˆë‹¤ë©´ ì¸ëŒì„œ í”¼ì–´ì…ë‹ˆë‹¤. ì •ì±…ì— ë§ê²Œ ì„¤ì •í•´ì£¼ì„¸ìš”.

ìë°” ê¸°ë°˜ì˜ ì²´ì¸ì½”ë“œëŠ” ì–´ë…¸í…Œì´ì…˜ì„ í†µí•´ í•¨ìˆ˜ì™€ ë°ì´í„°ë¥¼ êµ¬ë¶„í•©ë‹ˆë‹¤. ë˜í•œ ì²´ì¸ì½”ë“œ SDKë¥¼ ë°˜ë“œì‹œ í™œìš©í•´ì•¼í•©ë‹ˆë‹¤. ì•„ë˜ì˜ ìë°” ì²´ì¸ì½”ë“œ SDKë¥¼ ì°¸ê³ í•´ì£¼ì„¸ìš”.

[fabric-chaincode-shim 1.4.8 API](https://hyperledger.github.io/fabric-chaincode-java/release-1.4/api/)

# MyAssetContract.java

â­ï¸â­ï¸ Dappì—ì„œ í˜¸ì¶œí•  ìˆ˜ ìˆëŠ” **í•¨ìˆ˜ë¥¼ ì§€ì •**í•©ë‹ˆë‹¤. ë˜í•œ ì²´ì¸ì½”ë“œì˜ íŒ¨í‚¤ì§€ ì•ˆì— ì²´ì¸ì½”ë“œ ì´ë¦„ì„ ì§€ì •í•  ìˆ˜ ìˆë„ë¡ í•©ë‹ˆë‹¤.

```
/*
 * SPDX-License-Identifier: Apache-2.0
 */
package org.example;import org.hyperledger.fabric.contract.Context;
import org.hyperledger.fabric.contract.ContractInterface;
import org.hyperledger.fabric.contract.annotation.Contract;
import org.hyperledger.fabric.contract.annotation.Default;
import org.hyperledger.fabric.contract.annotation.Transaction;
import org.hyperledger.fabric.contract.annotation.Contact;
import org.hyperledger.fabric.contract.annotation.Info;
import org.hyperledger.fabric.contract.annotation.License;
import static java.nio.charset.StandardCharsets.UTF_8;// @Contract ì–´ë…¸í…Œì´ì…˜ì€ ì»¨íŠ¸ë™íŠ¸ ì •ë³´ í‘œê¸°ë¥¼ ìœ„í•¨. @License, @Contactë„ ë§ˆì°¬ê°€ì§€
@Contract(name = "MyAssetContract",
    info = @Info(title = "MyAsset contract",
                description = "My Smart Contract",
                version = "0.0.1",
                license =
                        @License(name = "Apache-2.0",
                                url = ""),
                                contact =  @Contact(email = "chaincode@example.com",
                                                name = "chaincode",
                                                url = "<http://chaincode.me>")))@Default // ì»¨íŠ¸ë™íŠ¸ ì§€ì • MyAssetContractì€ íŒ¨í‚¤ì§€ ì•ˆì— ìˆëŠ” ì»¨íŠ¸ë™íŠ¸ë“¤ ì¤‘ í•˜ë‚˜ë¡œ ì¸ì‹í•˜ë„ë¡ í•¨
public class MyAssetContract implements ContractInterface {
    public  MyAssetContract() {    }
    @Transaction() // Transactionìœ¼ë¡œ ì§€ì •ëœ ë©”ì„œë“œëŠ” ì™¸ë¶€ì—ì„œ í˜¸ì¶œ ê°€ëŠ¥í•¨. Transactionì´ ì—†ìœ¼ë©´ í˜¸ì¶œ ë¶ˆê°€
    public boolean myAssetExists(Context ctx, String myAssetId) {
        byte[] buffer = ctx.getStub().getState(myAssetId);
        return (buffer != null && buffer.length > 0);
    }    @Transaction()
    public void createMyAsset(Context ctx, String myAssetId, String value) {
        boolean exists = myAssetExists(ctx,myAssetId);
        if (exists) {
            throw new RuntimeException("The asset "+myAssetId+" already exists");
        }
        MyAsset asset = new MyAsset();
        asset.setValue(value);
        ctx.getStub().putState(myAssetId, asset.toJSONString().getBytes(UTF_8));
    }
		...
}
```

# MyAsset.java

ë¸”ë¡ì²´ì¸ì—ì„œ ì·¨ê¸‰í•˜ëŠ” ë°ì´í„°êµ¬ì¡°ì— ëŒ€í•œ ì˜ˆì‹œì…ë‹ˆë‹¤. ì–´ë…¸í…Œì´ì…˜ì„ í™œìš©í•˜ì—¬ ì €ì¥í•˜ê³ ì í•˜ëŠ” ë³€ìˆ˜ë¥¼ ì§€ì •í•©ë‹ˆë‹¤.

```
/*
 * SPDX-License-Identifier: Apache-2.0
 */package org.example;import org.hyperledger.fabric.contract.annotation.DataType;
import org.hyperledger.fabric.contract.annotation.Property;
import com.owlike.genson.Genson;@DataType() // @DataTypeìœ¼ë¡œ ì§€ì •í•´ì•¼ ë¸”ë¡ì²´ì¸ì— ì €ì¥ ê°€ëŠ¥
public class MyAsset {    private final static Genson genson = new Genson();    @Property() // ë¸”ë¡ì²´ì¸ì— ì €ì¥í•˜ê³ ì í•˜ëŠ” ë³€ìˆ˜ ì§€ì •. í•´ë‹¹ ì–´ë…¸í…Œì´ì…˜ì´ ì—†ì„ ê²½ìš° ì €ì¥í•˜ì§€ ì•ŠìŒ
    private String value;    public MyAsset(){
    }    public String getValue() {
        return value;
    }    public void setValue(String value) {
        this.value = value;
    }		// ì²´ì¸ì½”ë“œëŠ” jsonì˜ í˜•íƒœë¡œ ë°ì´í„°ë¥¼ ì†¡ìˆ˜ì‹ í•˜ë©° ì €ì¥ì†Œì—ë„ ë§ˆì°¬ê°€ì§€ë¡œ jsonì„ í™œìš©í•¨
    public String toJSONString() {
        return genson.serialize(this).toString();
    }    public static MyAsset fromJSONString(String json) {
        MyAsset asset = genson.deserialize(json, MyAsset.class);
        return asset;
    }
}
```

# gradle.build

gradle.build íŒŒì¼ì— ì¼ë°˜ì ì¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì¶”ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

â­ï¸ ì•„ë˜ì˜ ë‚´ìš©ì€ ê°€ì¥ ê¸°ë³¸ ë‚´ìš©ì´ë©°, í•„ìš”í•œ ê¸°ëŠ¥ì„ ì¶”ê°€ ë° ìˆ˜ì •í•˜ì—¬ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```
/*
 * SPDX-License-Identifier: Apache-2.0
 */
plugins {
    id 'com.github.johnrengelman.shadow' version '5.2.0'
    id 'java'
}version '0.0.1'sourceCompatibility = 1.8repositories {
    mavenLocal()
    mavenCentral()
    maven {
        url '<https://jitpack.io>'
    }
}dependencies {
		// ì•„ë˜ 5ê°œì˜ ë‚´ìš©ì€ ë°˜ë“œì‹œ ìœ ì§€í•´ì•¼í•©ë‹ˆë‹¤.
    implementation 'org.hyperledger.fabric-chaincode-java:fabric-chaincode-shim:2.2.0'
    implementation 'com.owlike:genson:1.6'
    testImplementation 'org.junit.jupiter:junit-jupiter:5.4.2'
    testImplementation 'org.assertj:assertj-core:3.11.1'
    testImplementation 'org.mockito:mockito-core:2.+'
}shadowJar {
    baseName = 'chaincode'
    version = null
    classifier = null    manifest {
        attributes 'Main-Class': 'org.hyperledger.fabric.contract.ContractRouter'
    }
}test {
    useJUnitPlatform()
    testLogging {
        events "passed", "skipped", "failed"
    }
}tasks.withType(JavaCompile) {
  options.compilerArgs << "-Xlint:unchecked" << "-Xlint:deprecation" << "-parameters"
}
```

# âš™ï¸ ë„¤íŠ¸ì›Œí¬ ì±„ë„ ìƒì„±ê³¼ í”¼ì–´ ì°¸ì—¬, ì²´ì¸ì½”ë“œ ì„¤ì¹˜ ë° ì‹¤í–‰ì„ ìœ„í•œ ì‰˜ìŠ¤í¬ë¦½íŠ¸

ì‰˜ìŠ¤í¬ë¦½íŠ¸ëŠ” ì¼ë¶€ë¥¼ ë°œì·Œí•˜ì—¬ ì‘ì„±í•˜ì˜€ìŠµë‹ˆë‹¤. ì‘ì„±ëœ ë‚´ìš©ì€ ë„¤íŠ¸ì›Œí¬ í™˜ê²½ì— ë”°ë¼ ì»¤ìŠ¤í„°ë§ˆì´ì§•ì´ í•„ìš”í•©ë‹ˆë‹¤.

ì•„ë˜ì˜ ìŠ¤í¬ë¦½íŠ¸ëŠ” fabric-samplesì—ì„œ í˜„ì¬ ë„¤íŠ¸ì›Œí¬ì— ë§ê²Œ ìˆ˜ì •í•œ ë¶€ë¶„ ì¤‘ ì¼ë¶€ì…ë‹ˆë‹¤.

ë„¤íŠ¸ì›Œí¬ êµ¬ì„±ì€ ë‹¤ì–‘í•  ìˆ˜ ìˆì–´ êµ¬ì²´ì ì¸ ìˆ«ìë¥¼ ë¹¼ê³  ì‘ì„±ë˜ì—ˆìŠµë‹ˆë‹¤.

- [peerJoin.sh](http://peerjoin.sh/)

```
#!/bin/bash# ì±„ë„ ìƒì„± ë‹¨ê³„ - cliê°€ ìˆëŠ” ì„œë²„ì—ì„œ clië¥¼ í†µí•´ ì•„ë˜ì˜ ìŠ¤í¬ë¦½íŠ¸ ë™ì‘
# ì±„ë„ ìƒì„± ë‹¨ê³„ì—ì„œëŠ” í•˜ë‚˜ì˜ ì˜¤ë”ëŸ¬ë¥¼ ì§€ì •í•˜ì—¬ ì±„ë„ì„ ìƒì„±í•˜ë„ë¡ ìš”ì²­
# ì˜¤ë”ëŸ¬ëŠ” ë„¤íŠ¸ì›Œí¬ì— ì°¸ì—¬í•˜ëŠ” ì˜¤ë”ëŸ¬ë¼ë©´ ë¬´ì—‡ì´ë“  ê°€ëŠ¥í•¨
# ì™„ë£Œì‹œ channel.block ìƒì„±
ORDERER_CA=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/ordererOrganizations/ssel.jbnu/orderers/orderer.ssel.jbnu/msp/tlscacerts/tlsca.ssel.jbnu-cert.pem
peer channel create -o [ì˜¤ë”ëŸ¬ ip/url]:[port] -c channel -f ./channel-artifacts/channel.tx --tls true --cafile $ORDERER_CA# í”¼ì–´ ì°¸ì—¬ ë‹¨ê³„ - ìƒì„±ëœ ì±„ë„ì— í”¼ì–´ ì°¸ì—¬
# channel.blockì„ í™œìš©í•˜ì—¬ í”¼ì–´ ì°¸ì—¬
# ì•„ë˜ì˜ 4ê°€ì§€ ë³€ìˆ˜ë¥¼ ì°¸ì—¬ ì‹œí‚¤ê³ ì í•˜ëŠ” í”¼ì–´ì˜ ì •ë³´ì— ë§ê²Œ ì…ë ¥
# ì°¸ì—¬ì‹œí‚¤ê³ ì í•˜ëŠ” ëª¨ë“  í”¼ì–´ì— ë™ì¼í•˜ê²Œ ìˆ˜í–‰ (ë³¸ ì˜ˆì œì—ì„œëŠ” 5ê°œ í”¼ì–´ì´ê¸° ë•Œë¬¸ì— 5ë²ˆ ì…ë ¥í•¨)
CORE_PEER_LOCALMSPID="OrgMSP"
CORE_PEER_TLS_ROOTCERT_FILE=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/org.ssel.jbnu/peers/peer1.org.ssel.jbnu/tls/ca.crt
CORE_PEER_MSPCONFIGPATH=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/org.ssel.jbnu/users/Admin@org.ssel.jbnu/msp
CORE_PEER_ADDRESS=[í”¼ì–´ ip/url]:[port]
peer channel join -b channel.block# ì•µì»¤í”¼ì–´ëŠ” ì²´ì¸ì½”ë“œì˜ í†µì‹ ì„ ìœ„í•´ ë°˜ë“œì‹œ í•„ìš”í•˜ë©° í”¼ì–´ ì°¸ì—¬ í›„ ì—…ë°ì´íŠ¸í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ì„¤ì •í•¨
# ì•µì»¤í”¼ì–´ëŠ” msp, certë¥¼ ë§Œë“œëŠ” ë‹¨ê³„ì—ì„œ ë°˜ë“œì‹œ ì„¤ì •í•œ í”¼ì–´ë¥¼ ëŒ€ìƒìœ¼ë¡œ í•´ì•¼í•¨
peer channel update -o [ì˜¤ë”ëŸ¬ ip/url]:[port] -c channel -f ./channel-artifacts/OrgMSPanchors.tx --tls true --cafile $ORDERER_CA# ===========================================================================================================
# || ì•„ë˜ì—ì„œë¶€í„°ëŠ” ì²´ì¸ì½”ë“œ ê´€ë ¨ ì½”ë“œë§Œ ì‘ì„±ë¨
# ||
# || ì²´ì¸ì½”ë“œ ì„¤ì¹˜ ë° ì‹¤í–‰ ì˜ˆì‹œ
# ===========================================================================================================CC_RUNTIME_LANGUAGE=java
CC_SRC_PATH=/opt/gopath/src/github.com/chaincode/
CC_VERSION=[version]# ì²´ì¸ì½”ë“œ ì„¤ì¹˜ - ë‹¤ë¥¸ ì¸ëŒì„œ í”¼ì–´ì—ë„ ë™ì¼í•˜ê²Œ ìˆ˜í–‰
# ì²´ì¸ì½”ë“œë¥¼ ì„¤ì¹˜í•  ë•ŒëŠ” í”¼ì–´ ì°¸ì—¬ ë‹¨ê³„ì—ì„œì²˜ëŸ¼ í”¼ì–´ ì§€ì •ì„ ìœ„í•œ í™˜ê²½ ë³€ìˆ˜ë¥¼ ì…ë ¥í•¨
# ì²´ì¸ì½”ë“œ ì„¤ì¹˜ ì‹œ ë²„ì „, ì²´ì¸ì½”ë“œ ì†ŒìŠ¤íŒŒì¼ ê²½ë¡œ, ì‹¤í–‰ ì–¸ì–´ ì…ë ¥
CORE_PEER_LOCALMSPID="OrgMSP"
CORE_PEER_TLS_ROOTCERT_FILE=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/org.ssel.jbnu/peers/peer1.org.ssel.jbnu/tls/ca.crt
CORE_PEER_MSPCONFIGPATH=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/org.ssel.jbnu/users/Admin@org.ssel.jbnu/msp
CORE_PEER_ADDRESS=[í”¼ì–´ ip/url]:[port]
peer chaincode install -n chaincode -v $CC_VERSION -p "$CC_SRC_PATH" -l "$CC_RUNTIME_LANGUAGE"# ì²´ì¸ì½”ë“œ ì¸ìŠ¤íƒ„ì‹œì—ì´íŠ¸ í™˜ê²½ ë³€ìˆ˜
CONFIG_ROOT=/opt/gopath/src/github.com/hyperledger/fabric/peer
ORG_MSPCONFIGPATH=${CONFIG_ROOT}/crypto/peerOrganizations/org1.ssel.jbnu/users/Admin@org.ssel.jbnu/msp
ORG_TLS_ROOTCERT_FILE=${CONFIG_ROOT}/crypto/peerOrganizations/org1.ssel.jbnu/peers/peer1.org.ssel.jbnu/tls/ca.crt
ORDERER_TLS_ROOTCERT_FILE=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/ordererOrganizations/ssel.jbnu/orderers/orderer.ssel.jbnu/msp/tlscacerts/tlsca.ssel.jbnu-cert.pem# ì²´ì¸ì½”ë“œ ì¸ìŠ¤íƒ€ì‹œì—ì´íŠ¸ - ë‹¤ë¥¸ ì¸ëŒì„œ í”¼ì–´ì—ë„ ë™ì¼í•˜ê²Œ ìˆ˜í–‰
# ì–´ë–¤ ì±„ë„ì— ë°°í¬í•˜ê³  ì²´ì¸ì½”ë“œ íŒ¨í‚¤ì§€ ì´ë¦„, í”„ë¡œê·¸ë˜ë° ì–¸ì–´, ë²„ì „, ë³´ì¦ ì •ì±…, ì‹¤í–‰í•˜ê³ ì í•˜ëŠ” ëŒ€ìƒ í”¼ì–´ë¥¼ ì§€ì •í•  ìˆ˜ ìˆìŒ
peer chaincode instantiate -o [ì˜¤ë”ëŸ¬ ip/url]:[port] -C channel -n chaincode 
-l "$CC_RUNTIME_LANGUAGE" -v $CC_VERSION -c '{"Args":[]}' -P "AND('Org1MSP.member','Org2MSP.member')"\\ 
--tls --cafile ${ORDERER_TLS_ROOTCERT_FILE}     --peerAddresses [í”¼ì–´ ip/url]:[port]\\
--tlsRootCertFiles ${ORG_TLS_ROOTCERT_FILE}# cliëŠ” chaincode invokeë¥¼ í†µí•´ ì²´ì¸ì½”ë“œë¥¼ ì‹¤í–‰í•´ ë³¼ ìˆ˜ ìˆìŒ
peer chaincode invoke -o [ì˜¤ë”ëŸ¬ ip/url]:[port] -C channel -n chaincode\\
-c '{"function":"createMyAsset","Args":["1","1111111"]}'\\    
--waitForEvent --tls                          --cafile ${ORDERER_TLS_ROOTCERT_FILE}\\   
--peerAddresses [í”¼ì–´ ip/url]:[port]           --peerAddresses [í”¼ì–´ ip/url]:[port]\\    
--tlsRootCertFiles ${ORG_TLS_ROOTCERT_FILE}   --tlsRootCertFiles ${ORG_TLS_ROOTCERT_FILE}peer chaincode invoke -o [ì˜¤ë”ëŸ¬ ip/url]:[port] -C channel -n chaincode\\
-c '{"function":"readMyAsset","Args":["1"]}'  --waitForEvent         --tls\\
--cafile ${ORDERER_TLS_ROOTCERT_FILE}         --peerAddresses [í”¼ì–´ ip/url]:[port]\\
--peerAddresses [í”¼ì–´ ip/url]:[port]           --tlsRootCertFiles ${ORG_TLS_ROOTCERT_FILE}\\     
--tlsRootCertFiles ${ORG_TLS_ROOTCERT_FILE}
```

# ë„ì»¤ ìŠ¤ì›œ ì„œë¹„ìŠ¤ ì‹œì‘

```
# ì•ì¥ì—ì„œ ì‘ì„±í•œ docker-compose íŒŒì¼ ê²½ë¡œ ì…ë ¥
docker stack deploy --compose-file [compose file path] ssel# cliê°€ ë™ì‘í•˜ê³  ìˆëŠ” ì„œë²„ì—ì„œ ì‹¤í–‰
docker exec $(docker ps -q -f name=cli) scripts/peerJoin.sh
```

# ë„ì»¤ ìŠ¤ì›œ í”¼ì–´, ì˜¤ë”ëŸ¬ ë“± ë™ì‘ í™•ì¸

```
$ docker service ls
ID                  NAME                   MODE           REPLICAS            IMAGE                              PORTS
k0yb4i4v7m9x        ssel_ca1          replicated          1/1                 hyperledger/fabric-ca:1.4.6        *:13054->7054/tcp
jxkpmxn3q0h7        ssel_ca2          replicated          1/1                 hyperledger/fabric-ca:1.4.6        *:9354->7054/tcp
9muc0xk0e1cn        ssel_ca3          replicated          1/1                 hyperledger/fabric-ca:1.4.6        *:9554->7054/tcp
kpw5ci0nsppv        ssel_cli2         replicated          1/1                 hyperledger/fabric-tools:1.4.6
daskoa4n720m        ssel_orderer1     replicated          1/1                 hyperledger/fabric-orderer:1.4.6   *:13050->7050/tcp
y59hp1591yph        ssel_orderer2     replicated          1/1                 hyperledger/fabric-orderer:1.4.6   *:9250->7050/tcp
i6zrzd2y79c4        ssel_orderer3     replicated          1/1                 hyperledger/fabric-orderer:1.4.6   *:9350->7050/tcp
t5bjegu9jctn        ssel_orderer4     replicated          1/1                 hyperledger/fabric-orderer:1.4.6   *:13150->7050/tcp
qmegkthk51o8        ssel_orderer5     replicated          1/1                 hyperledger/fabric-orderer:1.4.6   *:9550->7050/tcp
jg9muleuf8o6        ssel_peer0org1    replicated          1/1                 hyperledger/fabric-peer:1.4.6      *:13051->7051/tcp
x0n0e2jcnhci        ssel_peer0org2    replicated          1/1                 hyperledger/fabric-peer:1.4.6      *:9351->7051/tcp
us1otge1a0th        ssel_peer0org3    replicated          1/1                 hyperledger/fabric-peer:1.4.6      *:9551->7051/tcp
c4vkjjfuohll        ssel_peer1org1    replicated          1/1                 hyperledger/fabric-peer:1.4.6      *:9251->7051/tcp
k0dq6e2hb637        ssel_peer1org2    replicated          1/1                 hyperledger/fabric-peer:1.4.6      *:13151->7051/tcp
```

# ğŸ–¥ ì²´ì¸ì½”ë“œì™€ Dapp SDK

ì²´ì¸ì½”ë“œë¥¼ ê°œë°œí•˜ê³  ë¸”ë¡ì²´ì¸ì— ë°°í¬í•œ ë’¤ Dappì—ì„œ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œ SDKë¥¼ í™œìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

walletê³¼ connection.json íŒŒì¼ì´ ìˆì–´ì•¼ ë¸”ë¡ì²´ì¸ê³¼ ì—°ê²°ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.

ìœ„ì˜ ê³¼ì •ìœ¼ë¡œ ë¸”ë¡ì²´ì¸ ë„¤íŠ¸ì›Œí¬ê°€ êµ¬ì¶•ë˜ì—ˆìœ¼ë©° ì²´ì¸ì½”ë“œë„ í˜¸ì¶œ ê°€ëŠ¥í•˜ë‹¤ëŠ” ì „ì œí•˜ì— ì§„í–‰ë©ë‹ˆë‹¤.

# wallet

ì¡°ì§ì˜ admin, userì˜ í‚¤ê°’ì„ ê°€ì§€ê³  ìˆëŠ” ì§€ê°‘ì…ë‹ˆë‹¤. ì—°ê²°í•˜ê³ ì í•˜ëŠ” í”¼ì–´ì˜ ì‚¬ìš©ì ì •ë³´ë¡œ í™œìš©í•˜ê¸° ìœ„í•´ í•„ìš”ë¡œí•©ë‹ˆë‹¤.

wallet íŒŒì¼ì€ ibm bloakchain platformì—ì„œ í…œí”Œë¦¿ì„ ê°€ì ¸ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê° ë‚´ìš©ì„ êµ¬ì¶•í•œ ë„¤íŠ¸ì›Œí¬ì— ë§ê²Œ ë³€ê²½í•©ë‹ˆë‹¤.

â­ï¸ íŒŒì¼ëª…ì€ ë°˜ë“œì‹œ adminê³¼ ìœ ì € ëª…ìœ¼ë¡œ í•˜ì…”ì•¼í•©ë‹ˆë‹¤.

wallet íŒŒì¼ êµ¬ì¡°

```
admin íŒŒì¼ ì˜ˆì‹œ â†’{
	"name":"admin",
	"type":"X509",
	"mspid":"Org1MSP",
	"enrollment":{
		"signingIdentity":"admin",
		"identity":{
			"certificate":"-----BEGIN CERTIFICATE-----\\nMIICNTCCAdugAwIBAgIUXPdtqVFN54xe...-----END CERTIFICATE-----\\n"
		}
	}
}
```

# connection.json (ë¸”ë¡ì²´ì¸ ë„¤íŠ¸ì›Œí¬ì™€ ì—°ê²°í•˜ê¸° ìœ„í•´ í•„ìš”)

ì•„ë˜ì˜ json ë‚´ìš©ì€ ìœ„ì˜ Clientì˜ â€œconnectionâ€ ë¹¼ê³ ëŠ” ëª¨ë‘ ìƒì„±ëœ ë„¤íŠ¸ì›Œí¬ì— ë§ê²Œ ê°’ì„ ì…ë ¥í•´ì£¼ì–´ì•¼ í•©ë‹ˆë‹¤.

```
{
    "name": "[blockchain network name] - ex jbnu-blockchain",
    "version": "[version number] - ex) 1.0.0",
    "client": {
        "organization": "Org1", # íŠ¹ì • í”¼ì–´ë¥¼ ì§€ì •í•˜ê¸° ë•Œë¬¸ì— í•´ë‹¹ í”¼ì–´ì˜ ì¡°ì§ì„ ëª…ì‹œí•¨
        "connection": {
            "timeout": {
                "peer": {
                    "endorser": "300"
                }
            }
        }
    },
    "organizations": {
        "Org1": {
            "mspid": "Org1MSP",
            "peers": [
                "peer0.org1.ssel.jbnu",
                "peer1.org1.ssel.jbnu"
            ],
            "certificateAuthorities": [
                "ca.org1.ssel.jbnu"
            ]
        }
    },
    "peers": {
        "peer0.org1.ssel.jbnu": {
            "url": "grpcs://[peer 1 ip/url]:[port]",
            "tlsCACerts": {
								# pemì˜ ê°’ì„ ì§ì ‘ ë„£ì–´ë„ ë˜ê³  pemì˜ ê²½ë¡œë¥¼ ì…ë ¥í•˜ì—¬ ì„¤ì • ê°€ëŠ¥
								# "path": "[pem path]"
                "pem": "-----BEGIN CERTIFICATE-----\\nMIICTzCCAfWgAwIBAgIQTFnbKji0PGK21sAsSE1XyjAKBggqhkjOPQQDAjByMQsw... -----END CERTIFICATE-----\\n"
            },
            "grpcOptions": {
                "ssl-target-name-override": "[peer 1 ip/url]",
                "hostnameOverride": "[peer 1 ip/url]"
            }
        },
        "peer1.org1.ssel.jbnu": {
            "url": "grpcs://[peer 2 ip/url]:[port]",
            "tlsCACerts": {
                "pem": "-----BEGIN CERTIFICATE-----\\nMIICTzCCAfWgAwIBAgIQTFnbKji0PGK21sAsSE1XyjAKBggqhkjOPQQDAjByMQsw...-----END CERTIFICATE-----\\n"
            },
            "grpcOptions": {
                "ssl-target-name-override": "[peer 2 ip/url]",
                "hostnameOverride": "[peer 2 ip/url]"
            }
        }
    },
    "certificateAuthorities": {
        "ca.org1.ssel.jbnu": {
            "url": "https://[ca ip/url]:[port]",
            "caName": "ca-org1",
            "tlsCACerts": {
                "pem":"-----BEGIN CERTIFICATE-----\\nMIICSTCCAe+gAwIBAgIQUBbj4xv4QodlETyYxMTRGDAKBggqhkjOPQQDAjBvMQsw...-----END CERTIFICATE-----\\n"
            },
            "httpOptions": {
                "verify": false
            }
        }
    }
}
```

# Dapp (Hyperledger Fabric Java SDK)

SDK í™œìš©ì„ ìœ„í•´ pom.xmlì— í•„ìš”í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì•„ë˜ì™€ ê°™ì´ ì…ë ¥í•©ë‹ˆë‹¤. ëª¨ë‘ í•„ìš”í•˜ê¸° ë•Œë¬¸ì— ì „ë¶€ ì…ë ¥í•˜ì…”ì•¼í•©ë‹ˆë‹¤.

ì˜ˆì œì—ì„œëŠ” ë©”ì´ë¸ì„ ì‚¬ìš©í•˜ì˜€ëŠ”ë° ë¼ì´ë¸ŒëŸ¬ë¦¬ë§Œ ëª¨ë‘ ì •í™•íˆ ì¶”ê°€í•˜ì‹¤ ìˆ˜ ìˆë‹¤ë©´ gradleì´ë“  ì¼ì¼ì´ import í•˜ì‹œë˜ ìƒê´€ ì—†ìŠµë‹ˆë‹¤.

- pom.xml

```
<repositories>
    <repository>
        <id>jcenter</id>
        <url><https://jcenter.bintray.com/></url>
    </repository>
    <repository>
        <id>jitpack.io</id>
        <url><https://jitpack.io></url>
    </repository>
</repositories><dependencies>
    <!-- <https://mvnrepository.com/artifact/org.hyperledger.fabric-sdk-java/fabric-sdk-java> -->
    <dependency>
        <groupId>org.hyperledger.fabric-sdk-java</groupId>
        <artifactId>fabric-sdk-java</artifactId>
        <version>1.4.12</version>
    </dependency>    <!-- <https://mvnrepository.com/artifact/org.hyperledger.fabric/fabric-gateway-java> -->
    <dependency>
        <groupId>org.hyperledger.fabric</groupId>
        <artifactId>fabric-gateway-java</artifactId>
        <version>1.4.5</version>
    </dependency>    <!-- fabric-chaincode-java -->
    <dependency>
        <groupId>org.hyperledger.fabric-chaincode-java</groupId>
        <artifactId>fabric-chaincode-shim</artifactId>
        <version>${fabric-chaincode-java.version}</version>
        <scope>compile</scope>
    </dependency>    <!-- <https://mvnrepository.com/artifact/com.google.guava/guava> -->
    <dependency>
        <groupId>com.google.guava</groupId>
        <artifactId>guava</artifactId>
        <version>29.0-jre</version>
    </dependency>
    <!-- <https://mvnrepository.com/artifact/org.json/json> -->
    <dependency>
        <groupId>org.json</groupId>
        <artifactId>json</artifactId>
        <version>20200518</version>
    </dependency>    <!-- <https://mvnrepository.com/artifact/com.fasterxml.jackson.core/jackson-core> -->
    <dependency>
        <groupId>com.fasterxml.jackson.core</groupId>
        <artifactId>jackson-core</artifactId>
        <version>2.11.1</version>
    </dependency>    <!-- <https://mvnrepository.com/artifact/com.googlecode.json-simple/json-simple> -->
    <dependency>
        <groupId>com.googlecode.json-simple</groupId>
        <artifactId>json-simple</artifactId>
        <version>1.1.1</version>
    </dependency>    <!-- <https://mvnrepository.com/artifact/com.fasterxml.jackson.dataformat/jackson-dataformat-yaml> -->
    <dependency>
        <groupId>com.fasterxml.jackson.dataformat</groupId>
        <artifactId>jackson-dataformat-yaml</artifactId>
        <version>2.11.1</version>
    </dependency></dependencies>
```

**Dapp ì˜ˆì œ ì½”ë“œ**

ìœ„ì—ì„œ ë§Œë“¤ì–´ë‘” walletê³¼ connection.jsonì˜ ê²½ë¡œë¥¼ walletPath, connectionProfileì— ì…ë ¥í•˜ê³  userIDì—ëŠ” walletì— ìˆëŠ” user ë˜ëŠ” adminì„ ì…ë ¥í•©ë‹ˆë‹¤.

í•˜ì´í¼ë ˆì €ì™€ ì—°ê²°í•œ ë’¤ ì²´ì¸ì½”ë“œë¥¼ ì§€ì •í•˜ì—¬ í˜¸ì¶œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì•„ë˜ëŠ” ì˜ˆì œ ì½”ë“œì´ë©° setUser í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šì•„ë„ ë˜ê³  Wallet, Gateway, Network ë“±ì´ í•˜ì´í¼ë ˆì € íŒ¨ë¸Œë¦­ ìë°” SDK ì…ë‹ˆë‹¤. ìì„¸í•œ ë‚´ìš©ì€ ì•„ë˜ì˜ docsë¥¼ í™•ì¸í•´ì£¼ì„¸ìš”.

[fabric-gateway-java 1.4.5 API](https://hyperledger.github.io/fabric-gateway-java/release-1.4/)

- Dapp ì˜ˆì‹œ

```
import org.hyperledger.fabric.gateway.*;public class HyperLedgerManager {
    private Wallet fabricWallet;      // ë¸”ë¡ì²´ì¸ ìœ ì €
    private Gateway gateway;          // ë¸”ë¡ì²´ì¸ ì—°ê²°
    private Gateway.Builder builder;  // ë¸”ë¡ì²´ì¸ í™˜ê²½ ì„¤ì •
    private Network network;          // ì—°ê²°ëœ ë¸”ë¡ì²´ì¸ ë„¤íŠ¸ì›Œí¬ í™œìš©(íŠ¹íˆ ì²´ì¸ì½”ë“œ)
    private Path walletPath;
    private Path connectionProfilePath;
    private Path networkConfigPath;    public HyperLedgerManager(String walletPath, String connectionProfile, String userID) throws IOException {
        setHyperledgerConfig(walletPath, connectionProfile, userID);
    }    private void setHyperledgerConfig(String walletPathString, String connectionProfile, String userID) throws IOException {
        Path walletPath = Paths.get(walletPathString);            // wallet í´ë” ê²½ë¡œ
        fabricWallet = Wallet.createFileSystemWallet(walletPath); // 
        networkConfigPath = Paths.get(connectionProfile);         // connection.json íŒŒì¼ ì§€ì •        builder = Gateway.createBuilder();
				// walletê³¼ connection.jsonì„ ì…ë ¥í•˜ì—¬ ë¸”ë¡ì²´ì¸ê³¼ ì—°ê²°
        builder.identity(fabricWallet, userID).networkConfig(networkConfigPath).discovery(true);
        gateway = builder.connect(); // ë¸”ë¡ì²´ì¸ ì—°ê²°
    }		// ì²´ì¸ì½”ë“œ í˜¸ì¶œ ì˜ˆì œ
		public String queryTransaction() throws ContractException {
        String resultAsString        = null;
				String CHANNEL_NAME          = "channel";          // ì²´ì¸ì½”ë“œê°€ ë°°í¬ëœ ì±„ë„ëª…
				String CONTRACT_PACKAGE_NAME = "chaincode";        // ì²´ì¸ì½”ë“œ ì„¤ì¹˜ì‹œ ì§€ì •í•œ ì´ë¦„(-n chaincode)
				String CONTRACT_NAME         = "myAssetContract";  // ì»¨íŠ¸ë™íŠ¸ëª…(@defaultë¡œ ì§€ì •í•œ í´ë˜ìŠ¤ëª…)
				String key                   = "1";                // ì˜ˆì œ í‚¤ê°’
				String contractFunctionName  = "readMyAsset";      // ì²´ì¸ì½”ë“œ í˜¸ì¶œ í•¨ìˆ˜ëª…        network = gateway.getNetwork(CHANNEL_NAME); // ì±„ë„ì„ ì§€ì •í•˜ì—¬ ë„¤íŠ¸ì›Œí¬ ê°ì²´ ë°˜í™˜
        Contract contract = network.getContract(CONTRACT_PACKAGE_NAME, CONTRACT_NAME); // ë„¤íŠ¸ì›Œí¬ ê°ì²´ë¥¼ í™œìš©í•˜ì—¬ ì²´ì¸ì½”ë“œ ê°ì²´ í˜¸ì¶œ(ë°°í¬ëœ ì²´ì¸ì½”ë“œë§Œ ê°€ëŠ¥)				// ì²´ì¸ì½”ë“œ íŠ¸ëœì­ì…˜ì„ ë°œí–‰í•˜ì§€ ì•Šê³  ì¸ëŒì„œ í”¼ì–´ì—ì„œë§Œ ë™ì‘í•˜ê³  ì‹¤í–‰ ì¢…ë£Œ - ë‹¨ìˆœ ì¡°íšŒì— ì í•©
        byte[] result = contract.evaluateTransaction(contractFunctionName, key);        // ì²´ì¸ì½”ë“œ íŠ¸ëœì­ì…˜ì„ ë°œí–‰í•˜ì—¬ ë¸”ë¡ì²´ì¸ì— ê¸°ë¡ë¨ - ë°ì´í„° ì €ì¥, ì—…ë°ì´íŠ¸ ë“±ì— ì í•©
				byte[] result = contract.sendTransaction(contra ctFunctionName, key);				// ë°˜í™˜ë˜ëŠ” ê°’ì€ byte[] í˜•íƒœì´ë©° ì²´ì¸ì½”ë“œì— ì‘ì„±ëœ í˜•íƒœì— ë”°ë¼ ë³€í™˜ í•„ìš”
				// ì˜ˆë¥¼ ë“¤ì–´ ì•„ë˜ì˜ ì˜ˆì œì—ì„œëŠ” Stringì„ ì‚¬ìš©í•˜ì˜€ì§€ë§Œ int, double ë“±ì´ ìˆì„ ìˆ˜ ìˆìœ¼ë©°,
				// byte[] ìì²´ ì¼ìˆ˜ë„ ìˆìœ¼ë¯€ë¡œ ê°œë°œìê°€ ì‘ì„±í•œ ì²´ì¸ì½”ë“œì— ë”°ë¼ ë°ì´í„°ë¥¼ ì–´ë–»ê²Œ ì·¨ê¸‰í• ì§€ë¥¼ í˜„ ìœ„ì¹˜ì—ì„œ ê²°ì •í•´ì£¼ì–´ì•¼ í•¨
        resultAsString = new String(createCarResult, StandardCharsets.UTF_8);
        return resultAsString;
    }
...
}
```

IBM Blockchain Platformì˜ ë™ì‘ìœ¼ë¡œ í„°ë¯¸ë„ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆëŠ” ê°’ì´ ì „ë‹¬ë©ë‹ˆë‹¤.

# ğŸ› ë°œìƒ ê°€ëŠ¥í•œ ì˜¤ë¥˜

- **TLS ë¶ˆì¼ì¹˜ ì˜¤ë¥˜**

1. ì˜ëª»ëœ cert, msp ê²½ë¡œ ì„¤ì •
2. production ë””ë ‰í„°ë¦¬ì— ì €ì¥ëœ cert, mspì™€ ì…ë ¥ëœ cert, msp ë¶ˆì¼ì¹˜

- **í”¼ì–´, ì˜¤ë”ëŸ¬ ë„¤íŠ¸ì›Œí‚¹ ë¬¸ì œ**

> url/ip ë“± ì˜ëª»ëœ ì…ë ¥
>
> ì˜ëª»ëœ port ì„¤ì •
>
> genesis block, profile ë“±ì— ì…ë ¥ëœ url/ip port ì™€ ë¶ˆì¼ì¹˜
>
> ë°©í™”ë²½ í•´ì œ ì—¬ë¶€

- **ì²´ì¸ ì½”ë“œ ìƒì„± ë¶ˆê°€**

> ì²´ì¸ ì½”ë“œ ì»´íŒŒì¼ ì˜¤ë¥˜
>
> ë„ì»¤ ìŠ¤ì›œ ì˜¤ë²„ë ˆì´ ë„¤íŠ¸ì›Œí¬ attachable ì„¤ì • ëˆ„ë½